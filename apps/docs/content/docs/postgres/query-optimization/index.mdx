---
title: "Query optimization for Prisma Postgres"
description: "Learn how to record, analyze, and improve query performance using Prisma Optimize in Prisma Postgres."
---

Understand how Prisma Postgres helps you optimize query performance using the Prisma Optimize toolkit. This guide covers setup, recommendations, query recordings, and AI-powered insights to improve your database performance.

## Setup

### Prerequisites

Before you begin with Prisma Optimize for Prisma Postgres, ensure you have:

- A [Prisma Data Platform account](https://console.prisma.io/optimize?utm_source=docs&utm_medium=optimize-page)
- A project using [Prisma Client](/docs/v7/orm/prisma-client) version `5.0.0` or higher (latest version recommended)
- A [Prisma Postgres database](/docs/v7/postgres/getting-started)

:::note
Prisma Optimize is intended for use in local environments. Learn more in the [FAQ](/docs/v7/postgres/faq#can-i-enable-query-optimizations-for-prisma-postgres-in-production).
:::

### 1. Launch Optimize

1. Log in to your [Prisma Data Platform account](https://console.prisma.io/optimize?utm_source=docs&utm_medium=ppg_optimize_page)
2. Click the **Optimize** tab in the left navigation
3. Click **Generate API key**
4. Copy the API key and save it securely (e.g., password manager)
5. Click through the setup screens until you see **Finish & optimize**
6. Optimize will automatically begin a new recording session

### 2. Add Optimize to your application

#### Install the extension

<Tabs items={["npm", "pnpm", "yarn", "bun"]}>
  <Tab value="npm">```bash npm install @prisma/extension-optimize ```</Tab>
  <Tab value="pnpm">```bash pnpm add @prisma/extension-optimize ```</Tab>
  <Tab value="yarn">```bash yarn add @prisma/extension-optimize ```</Tab>
  <Tab value="bun">```bash bun add @prisma/extension-optimize ```</Tab>
</Tabs>

#### Add API key to `.env`

```bash
OPTIMIZE_API_KEY="YOUR_OPTIMIZE_API_KEY"
```

#### Extend Prisma Client

```ts
import { PrismaClient } from "../path/to/generated/prisma/client";
import { withOptimize } from "@prisma/extension-optimize";

const prisma = new PrismaClient().$extends(withOptimize({ apiKey: process.env.OPTIMIZE_API_KEY }));
```

**Using with other extensions:**

Extensions are applied sequentially. The last extension takes precedence for conflicting behavior.

```ts
const prisma = new PrismaClient().$extends(withOptimize()).$extends(withAccelerate());
```

### 3. Generate insights

1. Run your app and execute Prisma queries while recording is active
2. Click the red **Recording** button when done
3. Explore query details and check the **Recommendations** tab for suggested improvements

:::info
Use [Prisma AI](/docs/v7/postgres/query-optimization/prisma-ai) to understand recommendations and apply them within your Prisma model context.
:::

## Next steps

<FolderCards />
