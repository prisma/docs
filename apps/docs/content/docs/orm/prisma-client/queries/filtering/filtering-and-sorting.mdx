---
title: "Filtering and Sorting"
description: "Use Prisma Client API to filter records by any combination of fields or related record fields, and/or sort query results."
---

Prisma Client supports [filtering](#filtering) with `where` and [sorting](#sorting) with `orderBy`.

## Filtering

Filter records on any combination of fields, including [related models](#filter-on-relations).

```ts
const result = await prisma.user.findMany({
  where: {
    email: { endsWith: "prisma.io" },
    posts: { some: { published: true } },
  },
  include: {
    posts: { where: { published: true } },
  },
});
```

### Combining operators

```ts
const result = await prisma.user.findMany({
  where: {
    OR: [{ email: { endsWith: "gmail.com" } }, { email: { endsWith: "company.com" } }],
    NOT: { email: { endsWith: "admin.company.com" } },
  },
});
```

### Filter on null

```ts
// Null values
const posts = await prisma.post.findMany({
  where: { content: null },
});

// Non-null values
const posts = await prisma.post.findMany({
  where: { content: { not: null } },
});
```

### Filter on relations

```ts
// Users with posts having >10 views
const result = await prisma.user.findMany({
  where: {
    posts: { some: { views: { gt: 10 } } },
  },
});

// Posts by author email
const posts = await prisma.post.findMany({
  where: {
    author: { email: { contains: "prisma.io" } },
  },
});
```

### Filter on arrays

```ts
const posts = await prisma.post.findMany({
  where: { tags: { has: "databases" } },
});
```

### Case-insensitive filtering

```ts
const users = await prisma.user.findMany({
  where: {
    email: { endsWith: "prisma.io", mode: "insensitive" },
  },
});
```

## Sorting

```ts
const users = await prisma.user.findMany({
  orderBy: [{ role: "desc" }, { name: "asc" }],
  include: {
    posts: { orderBy: { title: "desc" } },
  },
});
```

### Sort by relation

```ts
const posts = await prisma.post.findMany({
  orderBy: { author: { email: "asc" } },
});

// Sort by relation count
const users = await prisma.user.findMany({
  orderBy: { posts: { _count: "desc" } },
});
```

### Sort by relevance (PostgreSQL/MySQL)

Requires `fullTextSearchPostgres` preview feature for PostgreSQL:

```ts
const users = await prisma.user.findMany({
  orderBy: {
    _relevance: {
      fields: ["bio"],
      search: "developer",
      sort: "desc",
    },
  },
});
```

### Null ordering

```ts
const users = await prisma.user.findMany({
  orderBy: { updatedAt: { sort: "asc", nulls: "last" } },
});
```
