---
title: 'Query engine'
metaTitle: 'Query engine (Reference)'
metaDescription: "Prisma's query engine manages the comunication with the database when using Prisma Client. Learn how it works on this page."
---

## Overview

From a technical perspective, Prisma Client consists of three major components:

- JavaScript client library
- TypeScript type definitions
- A query engine (in the form of binary file)

All of these components are located in the [generated `.prisma/client` folder](generating-prisma-client#the-prisma-client-npm-module) after you ran `prisma generate`.

This page covers relevant technical details about the query engine.

### The query engine binary file

The **query engine binary file** is called `query-engine-PLATFORM` where `PLATFORM` corresponds to the name of a compile target. For example, if the query engine must run on a [Darwin](<https://en.wikipedia.org/wiki/Darwin_(operating_system)>) operating system (e.g. Mac OS), it's called `query-engine-darwin`. You can find an overview of all supported platforms [here](../prisma-schema/generators##supported-operating-systems).

The query engine binary file is downloaded into the `runtime` directory of `node_modules/@prisma/client` when `prisma generate` is called.

Note that the query engine is implemented in Rust. The source code is located in the [`prisma-engines`](https://github.com/prisma/prisma-engines/) repository.

## The query engine at runtime

The query engine is running as a separate process on the same machine where the Node.js/TypeScript application is running.

![](https://i.imgur.com/1YmOJpx.png)

The query engine process is started when the [`connect()`](connection-management) method is called on your `PrismaClient` instance. Once the process is started, the query engine creates a [connnection pool](connection-management#connection-pool) and manages the physical connections to the database. From that point onwards, Prisma Client is ready to send [queries](crud) to the database (e.g. `findOne`, `findMany`, `create`, ...).

The query engine process is stopped and the database connections are closed when [`disconnect()`](connection-management) is invoked.

The following diagram depicts a "typical flow":

1. `connect()` is invoked on Prisma Client
1. The query engine process is started
1. The query engine establishes connections to the database and creates connection pool
1. Prisma Client is now ready to send queries to the database
1. Prisma Client sends a `findMany()` query to the query engine
1. The query engine translates the query into SQL and sends it to the database
1. The query engine receives the SQL response from the database
1. The query engine returns the result as plain old JavaScipt objects to Prisma Client
1. `disconnect()` is invoked on Prisma Client
1. The query engine closes the database connections
1. The query engine process is stopped

![](https://i.imgur.com/Nwwx5Cv.png)

## Responsibilities of the query engine

The query engine has the following responsibilities in an application that uses Prisma Client:

- manage physical database connections in connection pool
- receive incoming queries from the Prisma Client Node.js process
- generate SQL queries
- send SQL queries to the database
- process responses from the database and send them back to Prisma Client

## Debugging the query engine

You can access the logs of the query engine by setting the [`DEBUG`](debugging) environment variable to `engine`:

```bash
export DEBUG="engine"
```

You can also get more visibility into the SQL queries that are generated by the query engine by setting the `query` log level in Prisma Client:

```ts
const prisma = new PrismaClient({
  log: ['query'],
})
```

Learn more in the [Debugging](debugging) and [Logging](logging) pages of the docs.
