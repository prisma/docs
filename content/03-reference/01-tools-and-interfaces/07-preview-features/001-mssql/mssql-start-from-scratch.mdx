---
title: 'Start from scratch with MSSQL'
metaTitle: 'Start from scratch with MSSQL (Preview)'
metaDescription: ''
langSwitcher: ['typescript', 'node']
---

<TopBlock>

This page walks you through the process of setting up Prisma from scratch with your own database. It uses plain SQL to create tables in your database. 


</TopBlock>

## Prerequisites

In order to successfully complete this guide, you need:

- [Node.js](https://nodejs.org/en/) installed on your machine
- a [MSSQL](https://www.postgresql.org/) database server running

  - MSSQL on Docker
  - MSSQL on Windows (local)

Make sure you have your database [connection URL](../../reference/database-connectors/connection-urls) (that includes your authentication credentials) at hand!

## Create project setup

<SwitchTech technologies={['typescript', '*']}>

1. Create a project directory and navigate into it:

    ```terminal copy
    mkdir hello-prisma
    cd hello-prisma
    ```

1. Initialize a TypeScript project and add the Prisma CLI as a development dependency to it:

  ```terminal copy
  npm init -y
  npm install @prisma/cli typescript ts-node @types/node --save-dev
  ```

  This creates a `package.json` with an initial setup for your TypeScript app.

1. Next, create a `tsconfig.json` file and add the following configuration to it:

  ```json file=tsconfig.json copy
  {
    "compilerOptions": {
      "sourceMap": true,
      "outDir": "dist",
      "strict": true,
      "lib": ["esnext"],
      "esModuleInterop": true
    }
  }
  ```

1. Invoke the Prisma CLI by prefixing it with `npx` - confirm that you can see the Prisma help screen:

  ```terminal
  npx prisma
  ```

1. Set up your Prisma project by creating your [Prisma schema](../../reference/tools-and-interfaces/prisma-schema/prisma-schema-file) file with the following command:

    ```terminal copy
    npx prisma init
    ```

  This command created a new directory called `prisma` with the following contents:

    - `schema.prisma`: The Prisma schema with your database connection and the Prisma Client generator
    - `.env`: A [dotenv](https://github.com/motdotla/dotenv) file for defining environment variables (used for your database connection)

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

1. Create a project directory and navigate into it:

    ```terminal copy
    mkdir hello-prisma
    cd hello-prisma
    ```

1. Initialize a Node.js project and add the Prisma CLI as a development dependency to it:

    ```terminal copy
    npm init -y
    npm install @prisma/cli --save-dev
    ```

  This creates a `package.json` with an initial setup for a Node.js app.

1. Invoke the Prisma CLI by prefixing it with `npx` - confirm that you can see the Prisma help screen:

  ```terminal
  npx prisma
  ```

1. Set up your Prisma project by creating your [Prisma schema](../../reference/tools-and-interfaces/prisma-schema/prisma-schema-file) file with the following command:

    ```terminal copy
    npx prisma init
    ```

  This command created a new directory called `prisma` with the following contents:

    - `schema.prisma`: The Prisma schema with your database connection and the Prisma Client generator
    - `.env`: A [dotenv](https://github.com/motdotla/dotenv) file for defining environment variables (used for your database connection)

</SwitchTech>



## Connect your database

1. Add the following line to the `client` block in your schema file to enable the MSSQL preview:

    ```prisma file=prisma/schema.prisma
    generator client {
      provider        = "prisma-client-js"
    |  previewFeatures = ["microsoftSqlServer"]
    }
    ```

1. Set the `provider` and `url` fields of the `datasource` block in your Prisma schema as shown:

  ```prisma file=prisma/schema.prisma
  datasource db {
    provider = "sqlserver"
    url      = env("DATABASE_URL")
  }
  ```

1. Define the `DATABASE_URL` [environment variable](../../reference/tools-and-interfaces/prisma-schema/prisma-schema-file#using-environment-variables) in the `prisma/.env` file - this is the connection string to your database:

    ```js file=prisma/.env
    DATABASE_URL="sqlserver://localhost:1433;database=mydb;user=sa;password=r@ndomP@$$w0rd;trustServerCertificate=true;encrypt=DANGER_PLAINTEXT"
    ```

    > It is **very important** to include `trustServerCertificate=true;encrypt=DANGER_PLAINTEXT` if you are using MSSQL on MacOS.

1. Adjust the connection string to match your setup - see [MSSQL connection string](mssql-connection-string) for more information.

1. Introspect your database to 

  ```terminal
  npx prisma introspect
  ```

## Create database tables with SQL

In this guide, you'll use plain SQL to create the tables in your database. Create a new file called `schema.sql` and add the following contents to it:

```sql file=schema.sql copy
CREATE TABLE "public"."User" (
  id SERIAL PRIMARY KEY NOT NULL,
  name VARCHAR(255),
  email VARCHAR(255) UNIQUE NOT NULL
);

CREATE TABLE "public"."Post" (
  id SERIAL PRIMARY KEY NOT NULL,
  title VARCHAR(255) NOT NULL,
  "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
  content TEXT,
  published BOOLEAN NOT NULL DEFAULT false,
  "authorId" INTEGER NOT NULL,
  FOREIGN KEY ("authorId") REFERENCES "public"."User"(id)
);

CREATE TABLE "public"."Profile" (
  id SERIAL PRIMARY KEY NOT NULL,
  bio TEXT,
  "userId" INTEGER UNIQUE NOT NULL,
  FOREIGN KEY ("userId") REFERENCES "public"."User"(id)
);
```

See [type mapping between PostgreSQL to Prisma schema during introspection](../../reference/database-connectors/postgresql#introspection) for information about what each database type maps to in the Prisma Schema.

> **Note**: Some fields are written in double-quotes to ensure PostgreSQL uses proper casing. If no double-quotes were used, PostgreSQL would just read everything as _lowercase_ characters.

You can create the tables using any PostgreSQL client of your choice. If you're using `psql`, you can now create the tables using the following command:

```terminal
psql -h HOST -d DATABASE -U USER -f schema.sql
```

Similar to before, you need to replace the all-uppercase placeholders with your database credentials, e.g.:

<TabbedContent tabs={[<FileWithIcon text="Unix (Mac OS, Linux)" icon="display"/>, <FileWithIcon text="Windows" icon="display"/>]}>	

<tab>	

```terminal copy
psql -h localhost -d hello-prisma -U janedoe -f schema.sql
```

</tab>	

<tab>	

```terminal copy
\connect DATABASE
\i 'c:/hello-prisma/schema.sql'
```

</tab>	

</TabbedContent>

## Introspect your database with Prisma

As a next step, you will introspect your database. The result of the introspection will be a [data model](../../reference/tools-and-interfaces/prisma-schema/data-model) inside your Prisma schema.

1. Run the following command to introspect your database:

  ```terminal copy
  npx prisma introspect
  ```

2. Open `prisma.schema` to see your data model:

```prisma file=prisma/schema.prisma
model Post {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  title     String
  content   String?
  published Boolean  @default(false)
  User      User     @relation(fields: [authorId], references: [id])
  authorId  Int
}

model Profile {
  id     Int     @default(autoincrement()) @id
  bio    String?
  User   User    @relation(fields: [userId], references: [id])
  userId Int     @unique
}

model User {
  id      Int      @default(autoincrement()) @id
  email   String   @unique
  name    String?
  Post    Post[]
  Profile Profile?
}
```

## Adjust the data model

1. Adjust the data model as shown:

```prisma file=prisma/schema.prisma
model Post {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  title     String
  content   String?
  published Boolean  @default(false)
âœŽ  author    User     @relation(fields: [authorId], references: [id])
  authorId  Int
}

model Profile {
  id     Int     @default(autoincrement()) @id
  bio    String?
âœŽ  user   User    @relation(fields: [userId], references: [id])
  userId Int     @unique
}

model User {
  id      Int      @default(autoincrement()) @id
  email   String   @unique
  name    String?
âœŽ  posts   Post[]
âœŽ  profile Profile?
}
```

2. Try re-introspecting - Prisma will not overwrite your changes.

## Install and generate Prisma Client

To get started with Prisma Client, you need to 

1. Install the `@prisma/client` package:

```terminal copy
npm install @prisma/client
```

Notice that the [`@prisma/client` node module](../../reference/tools-and-interfaces/prisma-client/generating-prisma-client#the-prismaclient-npm-package) references a folder named `.prisma\client`. The `.prisma\client` folder contains your generated Prisma Client, and is modified each time you change the schema and run the following command:

```terminal
npx prisma generate
```

This commands reads your Prisma schema and generates your Prisma Client library into `node_modules/@prisma/client`.

![](https://imgur.com/FensWfo.png)

The `@prisma/client` node module references a folder named `.prisma/client`, which contains your unique, generated Prisma Client:

![The .prisma and @prisma folders](setup-prisma/prisma-client-node-module.png)

## Write your first query with Prisma Client

Now that you have generated your Prisma Client library, you can start writing queries to read and write data in your database. For the purpose of this guide, you'll use a plain Node.js script to explore some basic features of Prisma Client.

<SwitchTech technologies={['typescript', '*']}>

Create a new file called `index.ts` and add the following code to it:

```js copy file=index.ts
import { PrismaClient } from "@prisma/client"

const prisma = new PrismaClient()

async function main() {
  // ... you will write your Prisma Client queries here
}

main()
  .catch(e => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

Create a new file called `index.js` and add the following code to it:

```js copy file=index.js
const { PrismaClient } = require("@prisma/client")

const prisma = new PrismaClient()

async function main() {
  // ... you will write your Prisma Client queries here
}

main()
  .catch(e => {
    throw e
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

</SwitchTech>

Here's a quick overview of the different parts of the code snippet:

1. Import the `PrismaClient` constructor from the `@prisma/client` node module
1. Instantiate `PrismaClient`
1. Define an `async` function called `main` to send queries to the database
1. Call the `main` function
1. Close the database connections when the script terminates

Inside the `main` function, add the following query to read all `User` records from the database and print the result:

<SwitchTech technologies={['typescript', '*']}>

```ts file=index.ts
async function main() {
-  // ... you will write your Prisma Client queries here
+  const allUsers = await prisma.user.findMany()
+  console.log(allUsers)
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js
async function main() {
-  // ... you will write your Prisma Client queries here
+  const allUsers = await prisma.user.findMany()
+  console.log(allUsers)
}
```

</SwitchTech>

Now run the code with this command:

<SwitchTech technologies={['typescript', '*']}>

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```terminal copy
node index.js
```

</SwitchTech>

This should print an empty array because there are no `User` records in the database yet:

```js no-lines
[]
```

## Write data into the database

The `findMany` query you used in the previous section only _reads_ data from the database (although it was still empty). In this section, you'll learn how to write a query to _write_ new records into the `Post` and `User` tables.

Adjust the `main` function to send a `create` query to the database:

<SwitchTech technologies={['typescript', '*']}>

```ts copy file=index.ts
async function main() {

  await prisma.user.create({
    data: {
      name: "Alice",
      email: "alice@prisma.io",
      posts: {
        create: { title: "Hello World" },
      },
      profile: {
        create: { bio:  "I like turtles" }
      }
    }
  })

  const allUsers = await prisma.user.findMany({
    include: { 
      posts: true,
      profile: true 
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js copy file=index.js
async function main() {

  await prisma.user.create({
    data: {
      name: "Alice",
      email: "alice@prisma.io",
      posts: {
        create: { title: "Hello World" },
      },
      profile: {
        create: { bio: "I like turtles" }
      }
    }
  })

  const allUsers = await prisma.user.findMany({
    include: { 
      posts: true,
      profile: true 
    },
  })
  console.dir(allUsers, { depth: null })
}
```

</SwitchTech>


This code creates a new `User` record together with new `Post` and `Profile` records using a [nested write](../../reference/tools-and-interfaces/prisma-client/relation-queries#nested-writes) query. The `User` record is connected to the two other ones via the `Post.author` â†” `User.posts` and `Profile.user` â†” `User.profile` [relation fields](../../reference/tools-and-interfaces/prisma-schema/relations#relation-fields) respectively.

Notice that you're passing the [`include`](../../reference/tools-and-interfaces/prisma-client/field-selection#include) option to `findMany` which tells Prisma Client to include the `posts` and `profile` relations on the returned `User` objects.

<SwitchTech technologies={['typescript', '*']}>

Run the code with this command:

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

Run the code with this command:

```terminal copy
node index.js
```

</SwitchTech>

The output should look similar to this:

```js no-lines
[
  {
    email: 'alice@prisma.io',
    id: 1,
    name: 'Alice',
    posts: [
      {
        content: null,
        createdAt: 2020-03-21T16:45:01.246Z,
        id: 1,
        published: false,
        title: 'Hello World',
        authorId: 1,
      }
    ],
    profile: {
      bio: 'I like turtles',
      id: 1,
      userId: 1,
    }
  }
]
```

<SwitchTech technologies={['typescript']}>

Also note that `allUsers` is _statically typed_ thanks to [Prisma Client's generated types](../../reference/tools-and-interfaces/prisma-client/advanced-usage-of-generated-types). You can observe the type by hovering over the `allUsers` variable in your editor. It should be typed as follows:

```ts no-lines
const allUsers: (User & {
    posts: Post[];
})[]

export type Post = {
  id: number
  title: string
  content: string | null
  published: boolean
  authorId: number | null
}
```

</SwitchTech>

The query added new records to the `User` and the `Post` tables:

**User**

| **id** | **email**           | **name**  |
| :----- | :------------------ | :-------- |
| `1`    | `"alice@prisma.io"` | `"Alice"` |

**Post**

| **id** | **createdAt**              | **title**       | **content** | **published** | **authorId** |
| :----- | :------------------------- | :-------------- | :---------- | :------------ | :--------- |
| `1`    | `2020-03-21T16:45:01.246Z` | `"Hello World"` | `null`      | `false`       | `1`        |

**Profile**

| **id** | **bio**           | **userId**  |
| :----- | :------------------ | :-------- |
| `1`    | `"I like turtles"` | `1` |

> **Note**: The numbers in the `authorId` column on `Post` and `userId` column on `Profile` both reference the `id` column of the `User` table, meaning the `id` value `1` column therefore refers to the first (and only) `User` record in the database.

Before moving on to the next section, you will "publish" the `Post` record you just created using an `update` query. Adjust the `main` function as follows:

<SwitchTech technologies={['typescript', '*']}>

```js file=index.ts copy
async function main() {
  const post = await prisma.post.update({
    where: { id: 1 },
    data: { published: true },
  })
  console.log(post)
}
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

```js file=index.js copy
async function main() {
  const post = await prisma.post.update({
    where: { id: 1 },
    data: { published: true },
  })
  console.log(post)
}
```

</SwitchTech>

<SwitchTech technologies={['typescript', '*']}>

Now run the code using the same command as before:

```terminal copy
npx ts-node index.ts
```

</SwitchTech>

<SwitchTech technologies={['node', '*']}>

Now run the code using the same command as before:

```terminal copy
node index.js
```

</SwitchTech>

You will see the following output:

```js no-lines
{
  authorId: 1,
  content: null,
  createdAt: 2020-04-09T09:25:07.663Z,
  id: 1,
  published: true,
  title: 'Hello World'
}
```

The `Post` record with an `id` of `1` now got updated in the database:

**Post**

| **id** | **title**                       | **content** | **published** | **authorId** |
| :----- | :------------------------------ | :---------- | :------------ | :--------- |
| `1`    | `"Hello World"`                 | `null`      | `true`        | `1`        |

Fantastic, you just wrote new data into your database for the first time using Prisma Client ðŸš€

## Next steps

This section lists a number of potential next steps you can now take from here. Feel free to explore these or read the [Introduction](../../understand-prisma/introduction) page to get a high-level overview of Prisma.

### Continue exploring the Prisma Client API

You can send a variety of queries with the Prisma Client API. Check out the [API reference](../../reference/tools-and-interfaces/prisma-client/api) and use your existing database setup from this guide to try them out.

**Tip**: You can use your editor's auto-completion feature to learn about the different API calls and the arguments it takes. Auto-completion is commonly invoked by hitting <kbd>CTRL</kbd>+<kbd>SPACE</kbd> on your keyboard.

<details><summary>Expand for more Prisma Client API examples</summary>

Here are a few suggestions for a number of more queries you can send with Prisma Client:

**Filter all `Post` records that contain `"hello"`**

```js
const filteredPosts = await prisma.post.findMany({
  where: {
    OR: [
      { title: { contains: "hello" },
      { content: { contains: "hello" },
    ],
  },
})
```

**Create a new `Post` record and connect it to an existing `User` record**

```js
const post = await prisma.post.create({
  data: {
    title: "Join us for Prisma Day 2020",
    author: {
      connect: { email: "alice@prisma.io" },
    },
  },
})
```

**Use the fluent relations API to retrieve the `Post` records of a `User` by traversing the relations**

```js
const posts = await prisma.profile
  .findOne({
    where: { id: 1 },
  })
  .user()
  .posts()
```

**Delete a `User` record**

```js
const deletedUser = await prisma.user.delete({
  where: { email: "sarah@prisma.io" },
})
```

</details>


### Explore the data in Prisma Studio

Prisma Studio is a visual editor for the data in your database. You can use it by running the following command:

```terminal copy
npx prisma studio
```

### Change the database schema (e.g. add more tables)

To evolve the app, you need to follow the same flow of the tutorial:

1. Manually adjust your database schema using SQL
1. Re-introspect your database
1. Optionally re-configure your Prisma Client API
1. Re-generate Prisma Client

![](https://imgur.com/ToNkpb2.png)


### Try a Prisma example

The [`prisma-examples`](https://github.com/prisma/prisma-examples/) repository contains a number of ready-to-run examples:

<TabbedContent tabs={[<FileWithIcon text="TypeScript" icon="code"/>, <FileWithIcon text="JavaScript (Node.js)" icon="code"/>]}>	

<tab>

| Demo                                                                                                               | Stack        | Description                                                                                         |
| :----------------------------------------------------------------------------------------------------------------- | :----------- | --------------------------------------------------------------------------------------------------- |
| [`rest-nextjs`](https://github.com/prisma/prisma-examples/tree/latest/typescript/rest-nextjs)                     | Fullstack    | Simple [Next.js](https://nextjs.org/) app (React) with a REST API                                   |
| [`graphql-nextjs`](https://github.com/prisma/prisma-examples/tree/latest/typescript/graphql-nextjs)               | Fullstack    | Simple [Next.js](https://nextjs.org/) app (React) with a GraphQL API                                |
| [`graphql-apollo-server`](https://github.com/prisma/prisma-examples/tree/latest/typescript/graphql-apollo-server) | Backend only | Simple GraphQL server based on [`apollo-server`](https://www.apollographql.com/docs/apollo-server/) |
| [`rest-express`](https://github.com/prisma/prisma-examples/tree/latest/typescript/rest-express)                   | Backend only | Simple REST API with Express.JS                                                                     |
| [`grpc`](https://github.com/prisma/prisma-examples/tree/latest/typescript/grpc)                                   | Backend only | Simple gRPC API                                                                                     |

</tab>

<tab>

| Demo                                                                                                               | Stack        | Description                                                                                         |
| :----------------------------------------------------------------------------------------------------------------- | :----------- | :-------------------------------------------------------------------------------------------------- |
| [`rest-nextjs`](https://github.com/prisma/prisma-examples/tree/latest/javascript/rest-nextjs)                     | Fullstack    | Simple [Next.js](https://nextjs.org/) app (React) with a REST API                                   |
| [`graphql-apollo-server`](https://github.com/prisma/prisma-examples/tree/latest/javascript/graphql-apollo-server) | Backend only | Simple GraphQL server based on [`apollo-server`](https://www.apollographql.com/docs/apollo-server/) |
| [`rest-express`](https://github.com/prisma/prisma-examples/tree/latest/javascript/rest-express)                   | Backend only | Simple REST API with Express.JS                                                                     |
| [`grpc`](https://github.com/prisma/prisma-examples/tree/latest/javascript/grpc)                                   | Backend only | Simple gRPC API                                                                                     |

</tab>

</TabbedContent>
