---
title: 'Import from existing database'
metaTitle: 'Import from existing database'
metaDescription: 'Learn how to import an existing database into Prisma Postgres'
hide_table_of_contents: true
staticLink: true
---

This guide shows you how to import data from your existing database provider to a Prisma Postgres database. You can accomplish this migration in three main steps:

1. Back up your databases via `pg_dump`.
2. Create a new Prisma Postgres database.
3. Import your backup into Prisma Postgres via `pg_restore`.

We will be using the [TCP tunnel](/prisma-postgres/tcp-tunnel) and securely connect to your Prisma Postgres database during the restore step. The TCP tunnel uses the [`@prisma/ppg-tunnel` package](https://www.npmjs.com/package/@prisma/ppg-tunnel). The tool sets up a secure proxy tunnel, eliminating the need for manual credential handling.

## Prerequisites

- A Prisma Postgres environment to move the data to.
- Node.js installed (version 16 or higher)
- PostgreSQL CLI Tools (`pg_dump`, `pg_restore`) for creating and restoring backups.

### Installing PostgreSQL 16 utilities

To create and restore backups, ensure you have the PostgreSQL 16 command-line tools installed. Run the following commands based on your operating system:

<TabbedContent code>

<TabItem value="macOS">

```terminal
brew install postgresql@16
which pg_dump
which pg_restore
```

</TabItem>

<TabItem value="Windows">
```terminal
# Download from the official PostgreSQL website:
# https://www.postgresql.org/download/windows/
# During installation, select "Command Line Tools".
# Then verify with:

where pg_dump
where pg_restore
```
</TabItem>

<TabItem value="Linux">
```terminal
sudo apt-get update
sudo apt-get install postgresql-client-16
which pg_dump
which pg_restore
```
</TabItem>

</TabbedContent>

:::tip
If you installed PostgreSQL but still see a ‚Äúcommand not found‚Äù error for pg_dump or pg_restore, ensure your installation directory is in your system‚Äôs PATH environment variable.
:::


## 1. Create a new Prisma Postgres database

Next, create your GA (General Availability) database:

1.	Visit [console.prisma.io](https://console.prisma.io) and sign in (or create an account).
2.	Create a Prisma Postgres database in the region of your choice.
3.	Copy the Database URL for later use.

Next, choose a database provider to import data from and proceed with the steps:

- [Neon](#import-data-from-neon-into-prisma-postgres)
- [Supabase](#import-data-from-supabase-into-prisma-postgres)

## Import data from Neon into Prisma Postgres

You can follow the steps below to import data from your [Neon](https://neon.tech/) database into Prisma Postgres.

### 1. Get the direct database connection string from Neon

Get the connection string for your [Neon database](https://neon.tech/docs/get-started-with-neon/connect-neon#obtaining-connection-details). 

:::warning

Make sure to select non-pooled connection string by switching off the `Connection pooling` toggle.

:::

Run the following command to create a backup of your Neon database:

```terminal
pg_dump \
  -Fc \
  -v \
  -d "postgresql://USER:PASSWORD@YOUR-NEON-HOST/neondb?sslmode=require" \
  -f neon_db_dump.bak
```

:::note

The `sslmode` has to be set to `require` and appended to your Neon database url for the command to work.

:::

Replace the connection string above with your actual Neon database URL (including your username, password, and host).

- `-Fc` uses the custom format for backups, recommended for pg_restore.
- `-v` runs pg_dump in verbose mode.
- `-d` specifies the database connection string.
- `-f` specifies the output file name for the backup.

### 2. Connect to Prisma Postgres with `@prisma/ppg-tunnel`

In a new terminal window, set up a secure connection to your Prisma Postgres database. 

First, export the `DATABASE_URL` environment variable containing the Prisma Postgres database url:

```bash
export DATABASE_URL="prisma+postgres://accelerate.prisma-data.net/?api_key=eyJhbGciOiJIUzI..."
```

Start the TCP tunnel:

```terminal
npx @prisma/ppg-tunnel --host 127.0.0.1 --port 5432 
```

You should see output similar to:

```terminal
Prisma Postgres auth proxy listening on 127.0.0.1:5432 üöÄ

Your connection is authenticated using your Prisma Postgres API key.
...

==============================
hostname:  127.0.0.1
port:      5432
username:  <anything>
password:  <none>
==============================
```

:::note
Keep this tunnel process running to maintain the connection!
:::

### 3. Upload the Neon database backup to Prisma Postgres

Use the backup file from **Step 1** to restore data into your GA database with `pg_restore` by running this command:

```bash
PGSSLMODE=disable \
pg_restore \
  -h 127.0.0.1 \
  -p 5432 \
  -v \
  -d postgres \
  ./neon_db_dump.bak \
&& echo "-complete-"
```

You have successfully migrated your Neon database to Prisma Postgres. Connect to your new database using a favorite IDE or Prisma Client to ensure all tables, rows, and schemas match your old environment.


## Import data from Supabase into Prisma Postgres

You can follow the steps below to import data from your [Supabase](http://supabase.com/) database into Prisma Postgres.

### 1. Get the database connection string using Session pooling from Supabase

Get the database connection string which uses a Supavisor session mode from your [Supabase database](https://supabase.com/docs/guides/database/connecting-to-postgres#supavisor-session-mode). 

Run the following command to create a backup of your Neon database:

```terminal
pg_dump \
  -Fc \
  -v \
  -d "postgresql://USER:PASSWORD@YOUR-NEON-HOST/neondb?sslmode=require" \
  -f neon_db_dump.bak
```

Replace the connection string above with your actual Neon database URL (including your username, password, and host).

- `-Fc` uses the custom format for backups, recommended for pg_restore.
- `-v` runs pg_dump in verbose mode.
- `-d` specifies the database connection string.
- `-f` specifies the output file name for the backup.

### 2. Connect to Prisma Postgres with `@prisma/ppg-tunnel`

In a new terminal window, set up a secure connection to your Prisma Postgres database. 

First, export the `DATABASE_URL` environment variable containing the Prisma Postgres database url:

```bash
export DATABASE_URL="prisma+postgres://accelerate.prisma-data.net/?api_key=eyJhbGciOiJIUzI..."
```

Start the TCP tunnel:

```terminal
npx @prisma/ppg-tunnel --host 127.0.0.1 --port 5432 
```

You should see output similar to:

```terminal
Prisma Postgres auth proxy listening on 127.0.0.1:5432 üöÄ

Your connection is authenticated using your Prisma Postgres API key.
...

==============================
hostname:  127.0.0.1
port:      5432
username:  <anything>
password:  <none>
==============================
```

:::note
Keep this tunnel process running to maintain the connection!
:::

### 3. Upload the Supabase database backup to Prisma Postgres

Use the backup file from **Step 1** to restore data into your GA database with `pg_restore` by running this command:

```bash
PGSSLMODE=disable \
pg_restore \
  -h 127.0.0.1 \
  -p 5432 \
  -v \
  -d postgres \
  ./neon_db_dump.bak \
&& echo "-complete-"
```

You have successfully migrated your Supabase database to Prisma Postgres. Connect to your new database using a favorite IDE or Prisma Client to ensure all tables, rows, and schemas match your old environment.