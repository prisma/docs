---
title: 'Finding entities based on their relation existence'
metaTitle: 'Finding entities based on their relation existence'
metaDescription: 'Learn how you can query for entities where their relation exists or not'
---

## Problem

A common use case when querying for relations from a database is "Find all the entities for table X where the relation Y doesn't exist". Taking a simple example of Users and Posts, I would usually query the DB for "Find me users that haven't created any posts". Let's see how this can be achieved with Prisma.

## Solution

Consider this Prisma schema

```prisma
model User {
  id    Int    @id @default(autoincrement())
  name  String
  posts Post[]
}

model Post {
  id     Int   @id @default(autoincrement())
  user   User? @relation(fields: [userId], references: [id])
  userId Int?
}
```

A the way you would query for the users that do not have any posts is as follows:

```js
await prisma.user.findMany({
  where: { posts: { none: {} } },
})
```

This will give all the users that haven't created any posts yet.

In a similar way, you can create a query for _Users who have one or more Posts_ as follows:

```js
await prisma.user.findMany({
  where: { posts: { some: {} } },
})
```

This will give all the users that have one or mosts made.

This article showed how you can query for entities based on if the relation exists.
