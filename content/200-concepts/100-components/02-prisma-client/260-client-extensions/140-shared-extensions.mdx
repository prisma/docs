---
title: 'Shared Prisma Client extensions'
metaTitle: 'Shared Prisma Client extensions (Preview)'
metaDescription: 'Share extensions or import shared extensions into your Prisma project'
tocDepth: 3
---

<TopBlock>

<Admonition type="warning">

This page is in draft.

</Admonition>

You can share your [Prisma Client extensions](/concepts/components/prisma-client/client-extensions/) with other users, either as packages or as code snippets, and import extensions that other users create into your Prisma projects.

</TopBlock>

## Share Prisma Client extensions

When you want to create extensions that will work for other users, and not just for your specific schema, use the `$all` prefix, such as [`$allModels`](/concepts/components/prisma-client/client-extensions/model#add-a-custom-method-to-all-models-in-your-schema). Extensions that use `$all` apply generally, not just to a named component of a specific schema.

For example, a generic extension might take the following form:

```ts
const xprisma = prisma.$extends({
  model: {
    $allModels: {
      // new method
      findOrCreate(...) { } // code for the new method goes inside the brackets
    }
  }
})

```

### Package an extension

For extensions that you package and share, you cannot predict which `prisma` instance that the extension user will use. Therefore, you cannot use `prisma.$extends`, which applies to a specific instance. Instead, use `Prisma.defineExtension`. `Prisma.defineExtension` declares the extension but does not apply the extension to a specific instance. In your code editor, it gives you the same autocomplete for the extension as you get for `$extends`.

When someone wants to use your extension in their project, they can apply the extension to an instance with `prisma.$extends`.

For example, you can package an extension with the following code:

```ts
import { Prisma } from '@prisma/client'

export default Prisma.defineExtension({
  model: {
    $allModels: {
      // new method
      findOrCreate(...) { } // code for the new method goes inside the brackets
    }
  }
})
```

You can then share the extension on `npm`. When you choose a package name, we recommend that you use the `prisma-extension-<package-name>` convention, to make it easier to find and install.

### Call a client-level method from your packaaged extension

When someone applies your packaged extension in their project, you cannot know the details of the client instance that the person applies the extension to. However, you need to refer to this client instance in the following situations:

- When you want to use a [client-level method](/reference/api-reference/prisma-client-reference#client-methods), such as `$queryRaw`, in your packaged extension.
- When you want to chain multiple `$extends` calls in your packaged extension.

You can refer to this client instance as follows:

```ts
Prisma.defineExtension((client) => {
  // This is the client instance that the extension user applies the extension to
  return client.$extends({})
})
```

For example,

**[we need a better example here - one that shows a top-level Prisma method]**

```ts
export default Prisma.defineExtension(client => {

  return client.$extends(
    model: {
      $allModels: {
        // new method
        findOrCreate(...) { } // code for the new method goes inside the brackets
      }
    }
  })
}
```

## Install a packaged extension

In your project, you can install any Prisma Client extension that another user has published to `npm`. To do so, run the following command:

```terminal
npm install prisma-extension-<package-name>
```

For example, if the package name for an available extension is `prisma-extension-find-or-create`, you could install it as follows:

```terminal
npm install prisma-extension-find-or-create
```

To import the `find-or-create` extension from the example above, and load it into your client instance, you could use the following code. This example assumes that the extension name is `findOrCreate`.

```ts
import findOrCreate from 'prisma-extension-find-or-create'

const xprisma = prisma.$extends(findOrCreate)
const user = await xprisma.user.findOrCreate({ ... })

xprisma.user.findOrCreate()
```

When you call a method in an extension, use the constant name from your `$extends` statement, not `prisma`. In the above example,`xprisma.user.findOrCreate` works, but `prisma.user.findOrCreate` does not, because the original `prisma` is not modified.
