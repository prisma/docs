---
title: 'Group by'
metaTitle: 'Group by (Reference)'
metaDescription: 'Use Prisma Client to group rows that have the same values.'
preview: true
---

<TopBlock>

Prisma Client allows you to group records by one or more field values - such as `country`, or `country` and `city` - and perform aggregations on each group. The following example groups all users by the `country` field and returns the total number of profile views for each country:

<CodeWithResult>
<Cmd>

```ts
const groupUsers = await prisma.user.groupBy({    
    by: ["country"],
    sum: {
        profileViews: true
    }
})
```
</Cmd>
<CmdResult>
</CmdResult>
</CodeWithResult>

</TopBlock>

## `groupBy` and filtering

`groupBy` supports two levels of filtering:

* Use `where` to filter all records **before grouping** - for example, only conside users where the email address contains `prisma.io`
* Use `having` to filter **entire groups** by some aggregate value, not individual records - for example, only return groups where the average `profileViews` is greater than 100

## `groupBy` and ordering

The following constraints apply when you combine `groupBy` and `orderBy`:

* If you use `skip` and/or `take` with `groupBy`, you must also include `orderBy` in the query
* Any field included in `orderBy` must also be present in `by`

## Examples

The following examples are based on a sample schema:

<a  id="sample-model"></a>
 
<details>
  <summary>Expand sample schema</summary>

```prisma
generator client {
  provider             = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Post {
  id         Int     @default(autoincrement()) @id  
  authorId   Int?
  content    String?
  published  Boolean @default(false)
  title      String
  adEarnings Float? 
  user       User?   @relation(fields: [authorId], references: [id])  

  @@index([authorId], name: "authorId")
}

model User {
  id              Int     @default(autoincrement()) @id
  email           String  @unique  
  name            String?
  age             Int?
  profileViews    Int?
  role            Role    @default(USER)
  posts           Post[]  
}

enum Role {
  ADMIN
  USER
  MODERATOR
}
```

</details>


## Examples

### Group by a single field

### Group by multiple fields

### Group by with aggregation

### Group by with a `where` filter

### Group by with a `having` filter

## Generated types

The following types relating to aggregation are generated from the `User` model in the [sample schema](#sample-model) - aggregation types are generated for any `model` with number fields:

## FAQ

### Can I use `select` with `groupBy`?

You cannot use `select` with `groupBy`. However, all fields included in `by` are automatically selected.

### What is the difference between using `where` and `having` with `groupBy`?

### What is the difference between `groupBy` and `distinct`?

Both `distinct` and `groupBy` 

* `groupBy` allows you to aggregate values within each group - `distinct
* `distinct` allows you to select any fields you want - `groupBy` only returns aggregations and the fields specified in `by`
* Underlying query