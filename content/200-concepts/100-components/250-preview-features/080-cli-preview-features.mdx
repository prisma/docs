---
title: Prisma CLI Preview features
metaDescription: Prisma CLI features that are currently in Preview.
tocDepth: 2
---

<TopBlock>

To use a Preview CLI feature, [use the `--preview-feature` flag](./) when you run the command. [Share your feedback on all Preview features on GitHub](https://github.com/prisma/prisma/issues/3108).

</TopBlock>

### <inlinecode> migrate diff </inlinecode>

<Admonition type="info">

This command is available in Preview in versions 3.9.0 and later.

</Admonition>

This command compares two database schema sources and outputs a description of a migration taking the first to the state of the second.

The output can be given either as a human-readable summary (the default) or an executable script.

The format of the command is:

```terminal
npx prisma migrate diff --preview-feature --from-... <source1> --to-... <source2>
```

where the `--from-...` and `--to-...` options are selected based on the type of database schema source. The supported types of sources are:

- live databases
- migration histories
- Prisma data models
- an empty schema

Both schema sources must use the same database provider. For example, a diff comparing a PostgreSQL data source with a SQLite data source is not supported.

See also:

- [Migration troubleshooting in production](/guides/database/production-troubleshooting#fixing-failed-migrations-with-migrate-diff-and-db-execute) <span class="guide"></span>

#### Prerequisites

Before using the `migrate diff` command, if you are using the `--from-schema-datasource` or `--to-schema-datasource` you must define a valid [`datasource`](/concepts/components/prisma-schema/data-sources) within your `schema.prisma` file.

For example, the following `datasource` defines a SQLite database file within the current directory:

```prisma
datasource db {
  provider = "sqlite"
  url      = "file:my-database.db"
}
```

#### Options

One of the following `--from-...` options is required:

| Options                    | Description                                                                       |
| :------------------------- | :-------------------------------------------------------------------------------- |
| `--from-url`               | A data source URL                                                                 |
| `--from-migrations`        | Path to the Prisma Migrate migrations directory                                   |
| `--from-schema-datamodel`  | Path to a Prisma schema file, uses the data model for the diff                    |
| `--from-schema-datasource` | Path to a Prisma schema file, uses the URL in the `datasource` block for the diff |
| `--from-empty`             | Assume that you the data model you are migrating from is empty                    |

One of the following `--to-...` options is required:

| Options                  | Description                                                                       |
| :----------------------- | :-------------------------------------------------------------------------------- |
| `--to-url`               | A data source URL                                                                 |
| `--to-migrations`        | Path to the Prisma Migrate migrations directory                                   |
| `--to-schema-datamodel`  | Path to a Prisma schema file, uses the data model for the diff                    |
| `--to-schema-datasource` | Path to a Prisma schema file, uses the URL in the `datasource` block for the diff |
| `--to-empty`             | Assume that you the data model you are migrating to is empty                      |

Other options:

| Options                 | Required | Description                                                         | Notes                                                           |
| :---------------------- | :------- | :------------------------------------------------------------------ | :-------------------------------------------------------------- |
| `--shadow-database-url` | No       | URL for the shadow database                                         | Only required if using `--to-migrations` or `--from-migrations` |
| `--script`              | No       | Outputs a SQL script instead of the default human-readable summary. | Not supported on MongoDB.                                       |
| `--help`                | No       | Displays the help message.                                          |                                                                 |

#### Examples

- Compare two databases specified by their data source URL, and output the default human-readable summary:

  ```terminal
   prisma migrate diff \
    --preview-feature \
    --from-url "$DATABASE_URL" \
    --to-url "postgresql://login:password@localhost:5432/db2"
  ```

- Compare the state of a database with a URL of `$DATABASE_URL` to the schema defined by the migrations in the `./migrations` directory, and output the differences to a script `script.sql`:

  ```terminal
  prisma migrate diff \
   --preview-feature \
   --from-url "$DATABASE_URL" \
   --to-migrations ./migrations \
   --script > script.sql
  ```

### <inlinecode> db execute </inlinecode>

<Admonition type="info">

This command is available in Preview in versions 3.9.0 and later.

</Admonition>

<Admonition type="warning">

This command is currently not supported on MongoDB.

</Admonition>

This command applies a SQL script to the database without interacting with the Prisma migrations table. The script takes two inputs:

- the SQL script, which can be provided either on standard input or in a file
- the data source, which can either be the URL of the data source or the path to your Prisma schema file

The output of the command is connector-specific, and is not meant for returning data, but only to report success or failure.

See also:

- [Migration troubleshooting in production](/guides/database/production-troubleshooting#fixing-failed-migrations-with-migrate-diff-and-db-execute) <span class="guide"></span>

#### Prerequisites

Before using the `db execute` command, if you do not use the `--url` option you must define a valid [`datasource`](/concepts/components/prisma-schema/data-sources) within your `schema.prisma` file.

For example, the following `datasource` defines a SQLite database file within the current directory:

```prisma
datasource db {
  provider = "sqlite"
  url      = "file:my-database.db"
}
```

#### Options

One of the following data source inputs is required:

| Options    | Description                                                          |
| :--------- | :------------------------------------------------------------------- |
| `--url`    | URL of the data source to run the command on                         |
| `--schema` | Path to a Prisma schema file, uses the URL in the `datasource` block |

One of the following script inputs is required:

| Options   | Description                                                           |
| :-------- | :-------------------------------------------------------------------- |
| `--stdin` | Use the terminal standard input as the script to be executed          |
| `--file`  | Path to a file. The content will be sent as the script to be executed |

Other options:

| Options  | Required | Description                |
| :------- | :------- | :------------------------- |
| `--help` | No       | Displays the help message. |

#### Examples

- Take the content of a SQL file located at `./script.sql` and execute it on the database specified by the URL in the `datasource` block of your `schema.prisma` file:

  ```terminal
  prisma db execute --preview-feature --file ./script.sql --schema schema.prisma
  ```

- Take the SQL script from standard input and execute it on the database specified by the data source URL given in the `DATABASE_URL` environment variable:

  ```terminal
  $ echo 'TRUNCATE TABLE dev;' | prisma db execute --preview-feature --stdin --url="$DATABASE_URL"
  ```
