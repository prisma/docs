---
title: 'Use Data Proxy'
metaTitle: 'Configure Data Proxy in a serverless application'
metaDescription: 'Enable Data Proxy for your serverless application'
tocDepth: 1
---

<TopBlock>

To use the Data Proxy for your serverless application, you must first [create a project](/data-platform/projects/create) in Prisma Data Platform. When you create the project, you do the following:

- [select a Data Proxy region for the project] (make sure that it is close to your database)
- (Optional) [create a Data Proxy connection string](/data-platform/projects/create#optional-create-a-data-proxy-connection-string)

<Admonition>

**Note**<br /><br />

When you create your project, it is not required to also create a Data Proxy connection string. You can always create a new Data Proxy connection string at a later time as described below in [Enable Data Proxy for a project](#enable-data-proxy-for-a-project).

</Admonition>

You can then configure the connection string in your development or deployment environment and generate [Prisma Client for the Data Proxy](#generate-prisma-client-for-the-data-proxy).

</TopBlock>

## Enable Data Proxy for a project

You enable the Data Proxy for an application when you create a project in the platform.

### Prerequisites

* [Create a project to add your application in the platform](/data-platform/projects/create/). During the process, select a geographic location for the Data Proxy that is closest to the location of your database.
* If your database is behind a firewall, [enable static IP addresses](http://localhost:8000/data-platform/projects/create#create-a-project) for your project and add the IP addresses for the selected Data Proxy region to the allowlist of your database.
    * US East 1 (West Virginia)
        * 54.204.197.119
        * 3.222.148.224
        * 54.204.47.202
        * 3.227.136.248
    * EU Central 1 (Frankfurt, Germany)
        * 35.157.74.165
        * 18.194.25.248
        * 18.184.112.103
        * 18.157.219.25

### Steps

1. Open your project in the Prisma Data Platform. You can do so from the [**Projects**](https://cloud.prisma.io/projects) page.
2. Get a Data Proxy connection string for the selected environment.

    1. With the project open and an environment selected, click the **Data Proxy** tab.
    2. Click **Create a connection string**.

        <Admonition type="info">
        
        **Note**<br /><br />

        You can generate as many Data Proxy connection strings as needed. You can later revoke any of the connection strings that you no longer need.

        </Admonition>

    3. Enter a name for the new Data Proxy connection string and click **Create**.

        <img
            src="https://res.cloudinary.com/prismaio/image/upload/v1667438131/docs/pdp/data-proxy/data-proxy-create-and-name-new-connection-string_kytyti.png"
            alt="Prisma Data Platform - Data Proxy - Create and name a new Data Proxy connection string"
            width="450px"
        />

    4. Copy the `prisma://` connection string.

        <Admonition type="warning">
        
        **Important**<br /><br />

        Save the `prisma://` connection string securely. After you navigate to another page, you cannot retrieve the connection string again from the **Data Proxy**. You can only generate a new connection string, if necessary.

        </Admonition>

        <img
            src="https://res.cloudinary.com/prismaio/image/upload/v1667438896/docs/pdp/data-proxy/data-proxy-copy-connection-string_w0nanw.png"
            alt="Prisma Data Platform - Data Proxy - Copy the Data Proxy connection string"
            width="650px"
        />

## Generate Prisma Client for the Data Proxy

After you create your project in the platform and enable the Data Proxy, you can generate Prisma Client for the Data Proxy and use it with the `prisma://` connection string you obtained.

You can do so in your local development environment to test the process. In your deployment platform, you must replace the direct database connection string with the Data Proxy connection string and make sure that Prisma Client is auto-generated with the `--data-proxy` flag as described below.

### Prerequisites

* [Enable Data Proxy for your project](/data-platform/data-proxy/enable-data-proxy).
* Copy the Data Proxy connection string. Do so for the project environment for which you want to generate Prisma Client.

### Steps

1. In your local development environment, replace the direct database connection string with the Data Proxy `prisma://` connection string.
    ```bash file=.env highlight=1;delete|2;add
    - DATABASE_URL="postgresql://****:****@****"
    + DATABASE_URL="prisma://****:****@****"
    ```
    <Admonition>
    
    **Note**<br /><br />
    For security reasons, we strongly recommend that you always use environment variables for your database connection strings and Data Proxy strings, instead of hard-coding them into your `schema.prisma` file.<br /><br />
    For more information, see [Using `.env` files](/guides/development-environment/environment-variables#using-env-files).

    </Admonition>
4. Install `prisma` and `@prisma/client` version 3.15.2 or later.

    ```terminal
    npm install prisma@latest --save-dev 
    npm install @prisma/client@latest --save 
    ```

5. Generate Prisma Client with the `--data-proxy` option.
    
    ```terminal
    npx prisma generate --data-proxy
    ```

    The generated Prisma Client is a lightweight version because it excludes the local [query engine](/concepts/components/prisma-engines/query-engine) files. The query engine logic is handled by the Data Proxy.
6. Instantiate Prisma Client in your application code.
    * To use the Data Proxy with Node.js, instantiate `@prisma/client` as documented in [Generating the client](/concepts/components/prisma-client/working-with-prismaclient/generating-prisma-client).
        <TabbedContent tabs={[<FileWithIcon text="TypeScript" icon="code"/>, <FileWithIcon text="JavaScript" icon="code"/>]}>

        <tab>

        ```ts
        import { PrismaClient } from '@prisma/client'
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        <tab>

        ```js
        const { PrismaClient } = require('@prisma/clientj')
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        </TabbedContent>
    * To use the Data Proxy with in Edge runtimes, such as Cloudflare Workers or Vercel Edge Functions, instantiate `@prisma/client/edge`.
        
        <Admonition>

        **Note**<br /><br />

        You can use `@prisma/client/edge` only with the Data Proxy. In such cases, make sure to use the `--data-proxy` flag or `PRISMA_GENERATE_DATAPROXY=true` environment variable when you [generate Prisma Client](/concepts/components/prisma-client/working-with-prismaclient/generating-prisma-client).

        </Admonition>

        <TabbedContent tabs={[<FileWithIcon text="TypeScript" icon="code"/>, <FileWithIcon text="JavaScript" icon="code"/>]}>

        <tab>

        ```ts
        import { PrismaClient } from '@prisma/client/edge'
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        <tab>

        ```js
        const { PrismaClient } = require('@prisma/client/edge')
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        </TabbedContent>

### Result

The Data Proxy is now enabled for your application.

The generated Prisma Client has a reduced bundle size because the entire query engine logic is now hosted with the Data Proxy.

## Manage the number of database connections

You can adjust the maximum number of database connections of each Data Proxy connection pool.

To do so, add the `connection_limit` parameter to the database connection string of the environment in your project in the Prisma Data Platform.

```
postgresql://user:password@host:5432/mydb?connection_limit=60
```