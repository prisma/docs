---
title: 'Use Data Proxy'
metaTitle: 'Configure Data Proxy in a serverless application'
metaDescription: 'Enable Data Proxy for your serverless application'
tocDepth: 1
---

<TopBlock>

To use the Data Proxy for your serverless application, you must [enable the Data Proxy for your project]() in the Prisma Data Platform and select a Data Proxy location. Then, you must [generate Prisma Client for the Data Proxy]().

</TopBlock>

## Enable Data Proxy for a project

You enable the Data Proxy for an applcation when you import your application in the Prisma Data Platform and generate a `prisma://` connection string for Prisma Client.

### Prerequisites and considerations

* [Add your application to the Prisma Data Platform](/data-platform/projects/add-project/). During the process, select a geographic location for the Data Proxy that is closest to the geographic location of your database.
* If your database is behind a firewall or you need to add static IP addresses to the database allow list, use the Data Proxy static IP addresses.
    * US East 1 (West Virginia)
        * 54.204.197.119
        * 3.222.148.224
        * 54.204.47.202
        * 3.227.136.248
    * EU Central 1 (Frankfurt, Germany)
        * 35.157.74.165
        * 18.194.25.248
        * 18.184.112.103
        * 18.157.219.25

### Steps

1. Open your project in the Prisma Data Platform. You can do so from the [**Projects**](https://cloud.prisma.io/projects) page.
2. Get a Data Proxy connection string for the selected environment.

    <Admonition>
    
    **Note**<br /><br />
    
    When you create or import a project, you also configure a database connection string, a GitHub repository and branch, a Data Proxy location for the default environment which has the name Production.

    </Admonition>

    1. With the project open and an environment selected, click the **Data Proxy** tab.
    2. Click **Create a connection string**.

        <Admonition type="info">
        
        **Note**<br /><br />

        You can generate as many Data Proxy connection strings as you need. Subsequently, you can revoke any that are no longer needed.

        </Admonition>

    3. Enter a name for the new Data Proxy connection string and click **Create**.

        <img
            src="https://res.cloudinary.com/prismaio/image/upload/v1667438131/docs/pdp/data-proxy/data-proxy-create-and-name-new-connection-string_kytyti.png"
            alt="Prisma Data Platform - Data Proxy - Create and name a new Data Proxy connection string"
            width="450px"
        />

    4. Copy the `prisma://` connection string.

        <Admonition type="warning">
        
        **Important**<br /><br />

        Save the `prisma://` connection string securely. After you navigate to another page, you cannot retrieve the connection string again from the **Data Proxy**. You can only generate a new connection string, if necessary.

        </Admonition>

        <img
            src="https://res.cloudinary.com/prismaio/image/upload/v1667438896/docs/pdp/data-proxy/data-proxy-copy-connection-string_w0nanw.png"
            alt="Prisma Data Platform - Data Proxy - Copy the Data Proxy connection string"
            width="650px"
        />

## Generate Prisma Client for the Data Proxy

After you import your applcation in the Prisma Data Platform and enable the Data Proxy, you can generate Prisma Client for the Data Proxy and use it with the `prisma://` connection string you obtained.

### Prerequisites

* [Enable Data Proxy for your project](/data-platform/data-proxy/enable-data-proxy).
* Copy the Data Proxy connection string. Do so for the project environment for which you want to generate Prisma Client.

### Steps

1. In your local environment, replace the direct database connection string with the Data Proxy `prisma://` connection string.
    ```bash file=.env highlight=1;delete|2;add
    - DATABASE_URL="postgresql://****:****@****"
    + DATABASE_URL="prisma://****:****@****"
    ```
    <Admonition>
    
    **Note**<br /><br />
    For security reasons, we strongly recommend that you always use environment variables for your database connection strings and Data Proxy strings, instead of hard-coding them into your `schema.prisma` file.<br /><br />
    For more information, see [Using `.env` files](/guides/development-environment/environment-variables#using-env-files).

    </Admonition>
4. Install `prisma` and `@prisma/client` version 3.15.2 or later.

    ```terminal
    npm install prisma@latest --save-dev 
    npm install @prisma/client@latest --save 
    ```

5. Generate Prisma Client with the `--data-proxy` option.
    
    ```terminal
    npx prisma generate --data-proxy
    ```

    The generated Prisma Client is a lightweight version because it excludes the local [query engine](/concepts/components/prisma-engines/query-engine) files. The query engine logic is handled by the Data Proxy.
6. Instantiate Prisma Client in your application code.
    * To use the Data Proxy with Node.js, instantiate `@prisma/client` as documented in [Generating the client](/concepts/components/prisma-client/working-with-prismaclient/generating-prisma-client).
        <TabbedContent tabs={[<FileWithIcon text="TypeScript" icon="code"/>, <FileWithIcon text="JavaScript" icon="code"/>]}>

        <tab>

        ```ts
        import { PrismaClient } from '@prisma/client'
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        <tab>

        ```js
        const { PrismaClient } = require('@prisma/clientj')
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        </TabbedContent>
    * To use the Data Proxy with in Edge runtimes, such as Cloudflare Workers or Vercel Edge Functions, instantiate `@prisma/client/edge`.
        
        <Admonition>

        **Note**<br /><br />

        You can use `@prisma/client/edge` only with the Data Proxy. In such cases, make sure to use the `--data-proxy` flag or `PRISMA_GENERATE_DATAPROXY=true` environment variable when you [generate Prisma Client](/concepts/components/prisma-client/working-with-prismaclient/generating-prisma-client).

        </Admonition>

        <TabbedContent tabs={[<FileWithIcon text="TypeScript" icon="code"/>, <FileWithIcon text="JavaScript" icon="code"/>]}>

        <tab>

        ```ts
        import { PrismaClient } from '@prisma/client/edge'
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        <tab>

        ```js
        const { PrismaClient } = require('@prisma/client/edge')
        const prisma = new PrismaClient()
        // use `prisma` in your application to read and write data in your DB
        ```

        </tab>

        </TabbedContent>

### Result

The Data Proxy is now enabled for your application.

The [generated Prisma Client has a reduced bundle](/data-platform/data-proxy/bundle-size) size because the entire query engine logic is now hosted with the Data Proxy and is not bundled with Prisma Client.

## Manage the number of database connections

You can adjust the maximum number of database connections of each Data Proxy connection pool.

To do so, add the `connection_limit` parameter to the database connection string of the environment in your project in the Prisma Data Platform.

```
postgresql://user:password@host:5432/mydb?connection_limit=60
```