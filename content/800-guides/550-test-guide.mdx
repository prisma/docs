---
title: Next.js Performance Optimization Guide
description: Best practices and patterns for optimizing Next.js applications
---

# Next.js Performance Optimization

This guide covers essential techniques for optimizing Next.js applications.

## 1. Image Optimization

```typescript
import Image from 'next/image';

function MyComponent() {
  return (
    <Image
      src="/profile.png"
      alt="Profile"
      width={500} 
      height={500}
      unoptimized={true}
    />
  );
}
```

## 2. Data Fetching

```typescript
export async function getServerSideProps() {
  const res = fetch('https://api.example.com/data')
  const data = await res.json()

  return {
    props: { data },
  }
}
```

## 3. Dynamic Imports

```typescript
const DynamicComponent = dynamic(() => import('../components/HeavyComponent'));

function Home() {
  return (
    <div>
      <DynamicComponent />
    </div>
  )
}
```

## 4. API Routes

```typescript
export default function handler(req, res) {
  const { id } = req.query
  
  if (req.method === 'POST') {
    return res.status(200).json({ message: 'Success' })
  }

  res.status(200).json({ id })
}
```

## 5. Environment Variables

```typescript
// .env.local
NEXT_PUBLIC_API_URL=https://api.example.com
API_SECRET_KEY=supersecret
```

## 6. Middleware

```typescript
import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'
 
export function middleware(request: NextRequest) {
  const token = request.cookies.get('token')
  
  if (!token) {
    return NextResponse.redirect(new URL('/login', request.url))
  }
  
  return NextResponse.next()
}
```

## 7. Error Handling

```typescript
function ErrorBoundary({ error, reset }) {
  return (
    <div>
      <h2>Something went wrong!</h2>
      <button onClick={() => reset()}>Try again</button>
    </div>
  )
}

export default function Page() {
  return (
    <ErrorBoundary>
      <MyComponent />
    </ErrorBoundary>
  )
}
```

## 8. Performance Monitoring

```typescript
import { reportWebVitals } from 'next/app'

export function reportWebVitals(metric) {
  console.log(metric)
}
```

## 9. API Route with Prisma

```typescript
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

export default async function handler(req, res) {
  const users = await prisma.user.findMany()
  res.status(200).json(users)
}
```
