---
title: 'How to use Prisma ORM in a pnpm Workspaces monorepo'
metaTitle: 'How to use Prisma ORM in a pnpm workspaces monorepo'
description: 'Learn step-by-step how to integrate Prisma ORM in a pnpm Workspaces monorepo to build scalable and modular applications efficiently.'
sidebar_label: 'Use Prisma ORM with pnpm Workspaces'
image: '/img/guides/prisma-orm-in-pnpm-monorepo.png'
tags:
  - pnpm
  - Monorepo
  - Prisma
  - ORM
---

Prisma is a powerful ORM for managing your database, and when combined with [pnpm Workspaces](https://pnpm.io/workspaces), you can maintain a lean and modular monorepo architecture. In this guide, weâ€™ll walk through setting up Prisma in its own package within a pnpm Workspaces monorepo, enabling seamless type sharing and efficient database management across your apps.

### What you'll learn:

- How to initialize a monorepo using pnpm Workspaces.
- Steps to integrate Prisma as a standalone package.
- How to generate and share the Prisma Client across packages.
- Integrating the Prisma package into an application within your workspace.


## 1. Prepare your project

First, create a new directory for your project (e.g., `my-monorepo`) and initialize it with a `package.json` that defines the workspaces:

```terminal
mkdir my-monorepo
cd my-monorepo
pnpm init
```


Then create a `pnpm-workspace.yaml` file:

```terminal
touch pnpm-workspace.yaml
```

Add the following config to your `pnpm-workspace.yaml` file:

```yaml file=pnpm-workspace.yaml
packages:
  - "apps/*"
  - "packages/*"
catalogs:
  prisma:
    prisma: latest
```

:::note 

Explictly mention the lastest version of [prisma](https://www.npmjs.com/package/prisma) when you're following the guide in the `pnpm-workspace.yaml` to pin it for your project. At the time of writing it's version `6.3.1`.

:::

The `catalogs` help you pin a certain version of prisma across your repositories. You can learn more about them here.

Create the following folder structure:

```terminal
mkdir apps
mkdir -p packages/database
```

## 2. Prepare the shared database package

Now we'll prepare a shared database package using Prisma to be shared across the monorepo. 

Navigate to the `packages/database` directory and initialize a new package:

```terminal
cd packages/database
pnpm init 
```

Then add `prisma` to your `package.json` file as a development dependecy:

```json file=database/package.json
"devDependencies": {
  // add-start
    "prisma": "catalog:prisma"
  // add-end 
}
```

Then install Prisma in your database package:

```terminal
pnpm install
```

Then install the required dependencies for the database package:

```terminal
pnpm add typescript tsx @types/node -D
pnpm add @prisma/extension-accelerate
```

:::info

We're going to be using [Prisma Postgres](/prisma-postgres/getting-started) in this guide. If you're not using a Prisma Postgres database, you won't need the `@prisma/extension-accelerate` package.

:::

### Install Prisma ORM and create your first models

Then, run `prisma init --db` to initialize Prisma ORM in your project.

```terminal
pnpm prisma init --db
```

:::info

We're going to be using [Prisma Postgres](/prisma-postgres/getting-started) in this guide. If you're not using a Prisma Postgres database, you won't need to add the `--db` flag.

:::

This will open your browser and help you setup a Prisma Data Platform account or login to your account if you dpon't have one. Then, it will create a new `prisma` directory in your project, with a `schema.prisma` file inside of it. The `schema.prisma` file is where you will define your database models.

The `prisma init` command also creates a `.env` file in your project root with the Prisma Postgres database url. This file is used to store your database connection string.

Next, let's add a `User` model models to your `schema.prisma` file:

```prisma file=prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
  //add-start
  output = "../generated/client"
  //add-end
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//add-start
model User {
  id    Int     @id @default(autoincrement())
  email String  @unique
  name  String?
}
//add-end
```

### The importance of generating Prisma types in a [custom directory](/orm/prisma-client/setup-and-configuration/generating-prisma-client#using-a-custom-output-path)

In the `schema.prisma` file, we specify a custom `output` path where Prisma will generate its types. This ensures Prisma's types are resolved correctly.

:::note

In this guide, the types will be generated in the `database/generated/client` directory.

:::

Add helper scripts to your `package.json` file in the database package:

```json file=database/package.json
{
  "scripts": {
    "db:generate": "prisma generate --no-engine",
    "db:migrate": "prisma migrate dev",
    "db:deploy": "prisma migrate deploy"
  }
}
```

Then create an `client.ts` file:

```ts file=database/client.ts
import { PrismaClient } from "./generated/client";
import { withAccelerate } from '@prisma/extension-accelerate'

const prisma = new PrismaClient().$extends(withAccelerate())

const globalForPrisma = global as unknown as { prisma: typeof prisma }

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma

export default prisma
```

Then create an `index.ts` file:

```ts file=database/index.ts
export { prisma } from "./client"
export * from "./generated/client";
```